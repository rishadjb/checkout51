# checkout51
Test Project for Checkout51

## Framework

This application is built ontop of the laravel framework.

[![Build Status](https://travis-ci.org/laravel/framework.svg)](https://travis-ci.org/laravel/framework)

Documentation for the framework can be found on the [Laravel website](http://laravel.com/docs).

## Installation

To install the ingle insurance api, you will to perform the following.

  - Copy .env.example to .env
  - Update the settings
  - Migrate and seed the db:

```bash
./migratedb
```

#### Sync classes

```bash
php artisan source:sync
php artisan settings:sync
```

## Sources

The application has been set up so it may be extended to new clients like Checkout51. The client is to be provided in the API request as `source`

Additional improvements can include verifying API access for each client using a JWT auth token, that can be generated by a Auth layer

## Products

Each offer has a product associated with it which is stored in the product table

## Offers

### Batch Upload

To insert offers from a batch.json file for a specific source go to /uploadoffers/{source}

`eg: /uploadoffers/checkout51`

This route inserts all the offers listed in batch.json (stored at /resources/assets) into the database

It creates an entry for each unique product in the list and associates the offer with it

### View Offers

To view offers for a specific source go /viewoffers/{source}

Offers are sorted by product name in ascending order by default

#### Sorting Offers on View page

It can be sorted by the following criteria:

sort: name, cash_back
order: asc, desc

`eg: /viewoffers/{source}?sort=cash_back&order=desc`

### Edit Offers

To edit offers for a specific source go /editoffers/{source}

Offers are sorted by offer ID in ascending order by default

Each offer can be activated or deactivated on this page

#### Sorting Offers on Edit page

It can be sorted by the following criteria:

sort: offer_id, active
order: asc, desc

`eg: /editoffers/{source}?sort=offer_id&order=desc`



